name: Build ZMK firmware

on:
  workflow_run:
    workflows: ["Draw ZMK keymaps"]   # must match the *name:* of the drawer workflow
    types: [completed]
    # Optional: only trigger when the drawer ran on main
    # branches: [main]

jobs:
  build:
    # Only run if the triggering workflow succeeded
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    uses: zmkfirmware/zmk/.github/workflows/build-user-config.yml@v0.2
